###**지금부터 당신은 '최종 점검을 위한 표준 운영 절차(Standard Operating Procedure, SOP)'에 따라 행동합니다.**


###**B2-최종 점검을 위한 표준 운영 절차(Standard Operating Procedure, SOP).md**
---

#### **범용 최종 점검 체크리스트 (SOP v2)**

---

#### **Phase 0: 입력 소스 및 메타데이터 무결성 검증 (Input Source & Metadata Integrity Verification)**
*이 단계는 검증할 파일 자체가 규칙을 준수하는지 확인합니다.*

*   **[0.1] 파일명 정책 준수 (Filename Policy Compliance):**
    *   [ ] **(핵심 개선 사항) 파일명 자체에 금지된 요소(예: 버전 정보 `_v1`, `_Rev2` 등)가 포함되지 않았는가?**
    *   [ ] 파일명이 시스템의 표준 명명 규칙을 따르는가?
*   **[0.2] 파일 형식 및 역할 명확성 (File Format & Role Clarity):**
    *   [ ] 파일 확장자(`.md`, `.yaml` 등)가 내용과 일치하며, 파일명이 그 역할을 명확히 나타내는가? (예: `P0_...`, `p2_...`, `A_...`)

---

#### **Phase 1: 계획 검증 (Planning Verification)`**

*   **`[-1.1] CoT 감사 로그 생성:`** AI는 `planning_log.md`를 먼저 생성한다.
    *   *(로그 예시)* "입력된 `p2` 문서는 A~G까지 총 7개의 문서 세트를 요구합니다. 본 커널의 `2.2` 및 `3.3` 섹션은 이 7개 유형의 문서를 모두 포함하도록 계획합니다."
*   **`[-1.2] 계획-요구사항 교차 검증:`** 생성된 `planning_log.md`의 계획이 `[1.0] 요구사항 범위 검증`의 '마스터 리스트'와 일치하는지 검증합니다. 불일치 시 즉시 실패 처리합니다.

---

#### **Phase 1: 내용 무결성 검증 (Content Integrity Verification)**에 아래 항목을 **최우선 순위**로 신설해야 합니다.
*이 단계는 문서에 담긴 정보 자체의 정확성과 일관성을 확인합니다.*

*   **`[1.0] 요구사항 범위 검증 (Requirement Scope Validation)`**
    *   **[1.0.1] 마스터 산출물 목록 추출:** `p2_AI주도개발 드라이버 원칙`과 같은 **프레임워크 정의 문서**를 식별하고, 해당 문서에서 요구하는 **전체 산출물 목록(Master Artifact List)을 기계적으로 추출**한다. (예: `[A, B, C, D, E, F, G]`)
    *   **[1.0.2] 생성 계획 대조:** AI가 생성하려는 산출물 계획(예: `2.2. 핵심 산출 문서` 테이블)이 **마스터 산출물 목록의 모든 항목을 포함하는지 교차 검증**한다.
    *   **[1.0.3] 게이트 조건:** 만약 마스터 목록의 항목 중 하나라도 누락된 경우, **SOP는 즉시 '실패(FAIL)'를 반환하고 모든 후속 단계를 중단한다.**
*   **[1.1] 최신성 (Recency):**
    *   [ ] 사용자의 가장 마지막 지침, 수정 요청, 피드백이 모두 반영되었는가?
*   **[1.2] 정확성 (Accuracy):**
    *   [ ] 문서의 내용이 원본 소스 문서(GDD, 기술 문서 등)의 사실과 일치하는가? (왜곡 방지)
    *   [ ] 기술적 용어, 코드 예시, 데이터 값이 정확한가? (오류 방지)
*   **[1.3] 완전성 (Completeness):**
    *   [ ] 원본 소스 문서의 핵심 요구사항이나 개념이 생략되지 않았는가? (축약 방지)
    *   [ ] 각 섹션에서 다루기로 약속한 모든 항목이 포함되었는가? (누락 방지)
*   **[1.4] 가독성 (Readability):**
    *   [ ] 명백한 오탈자나 문법적 오류가 없는가? (오타 방지)
    *   [ ] 용어가 문서 전체 및 관련 문서 세트 내에서 일관되게 사용되는가?
*   **`[1.5] 잔여 지시문 부재 검증 (Absence of Remnant Directives):`** 최종 산출물 전체 텍스트에서 `"[AI 지침:"`, `"[TODO:"`, `"[내용 채우기]"` 와 같은 패턴이 존재하는지 스캔하여, 하나라도 발견되면 실패 처리합니다.
*   **`[1.6] 정량적 일치 검증 (Quantitative Matching):`**
    *   (GDD의 Epic 개수) == (대시보드의 Epic 개수)
    *   (p2의 요구 산출물 종류 개수) == (계획된 산출물 종류 개수)
    *   (CL01 체크리스트의 항목 개수) == (커널 문서의 관련 DoD 항목 개수)

---

#### **Phase 2: 기능적 무결성 검증 (Functional Integrity Verification)**
*이 단계는 문서가 자신의 역할을 올바르게 수행하는 데 필요한 구조적, 기능적 요소를 갖추었는지 확인합니다. **(이번에 놓쳤던 핵심 부분)**.*

*   **[2.1] (템플릿/지시서 문서) 실행 가능성 (Executability):**
    *   [ ] **AI를 위한 실행 지침 블록(예: `[META INSTRUCTION BLOCK]`)이 최상단에 존재하는가? (이번 오류의 직접적인 원인)**
    *   [ ] AI가 동적으로 내용을 채워야 할 지시문(예: `[AI 지침: ...]`)이 올바르게 포함되어 있는가?
*   **[2.2] (데이터/스키마 문서) 파싱 가능성 (Parsability):**
    *   [ ] 기계가 읽어야 할 코드 블록(YAML, JSON 등)이 문법적으로 유효하고, 약속된 위치(예: `.md` 파일 내 첫 번째 `yaml` 블록)에 있는가?
*   **[2.3] (실행 계획/Job Order 문서) 구조 준수 (Structural Compliance):**
    *   [ ] 정의된 템플릿의 모든 필수 필드(id, scope, deliverables, acceptance_criteria 등)가 포함되어 있는가?
    *   [ ] 계층 구조(예: `subtasks`의 의존성)가 논리적으로 올바른가?

---

#### **Phase 3: 시스템 무결성 검증 (System Integrity Verification)**
*이 단계는 문서 세트 전체의 상호 관계와 시스템으로서의 완결성을 확인합니다.*

*   **[3.1] 상호 참조 유효성 (Cross-Reference Validity):**
    *   [ ] 문서 내에서 다른 문서나 섹션을 참조할 때, 해당 참조 대상이 실제로 존재하며 이름이 정확한가? (예: `A.STAT_Contract.md` 참조)
    *   [ ] **(특히 중요) 파일명 정책(예: 버전 제거)이 모든 참조 경로에 일관되게 적용되었는가?**
*   **[3.2] 워크플로우 연속성 (Workflow Continuity):**
    *   [ ] 이전 단계의 산출물(예: `E.골격`)이 다음 단계(예: `F.Job Order`)의 입력으로 올바르게 연결되는가?
    *   [ ] `C.품질 게이트`에 정의된 테스트 케이스가 `B.스키마`의 실제 기능 항목들과 논리적으로 1:1 매핑되는가?
*   **`[3.3] 상호 원칙 모순 검증 (Cross-Principle Contradiction Check):`**
    *   AI는 주요 원칙 문서(`A0`, `A1`, `Z1`, `Z2`, `gates.rules`)의 핵심 규칙들을 추출하여 가상의 '규칙 매트릭스'를 구성합니다.
    *   이 매트릭스를 기반으로 상호 충돌 가능성이 있는 규칙이 있는지 분석하고 보고합니다. (예: `Z1`은 비동기 처리를 강제하는데, `G01`의 특정 로직이 동기(Blocking) 방식으로 기술된 경우 경고)
---
